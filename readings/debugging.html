<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Debugging
  (COURSE ID)
</title><link rel="stylesheet" href="../resources/stylesheet.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"></head><body style="background-image:url(../Images/logo.png);"><p xmlns="http://www.w3.org/TR/xhtml1/transitional" class="course">
  The New Tao of Java
<br></br><a name="body"></a></p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="NOPRINT"><p class="links">
[<a href="#body">Skip to Body</a>]
</p><p class="links"><b>Sections:</b> [<a href="../assignments/">Assignments</a>] [<a href="../examples/">Examples</a>] [<a href="../handouts/">Handouts</a>] [<a href="../readings/">Readings</a>]
</p><p class="links"><b>Reference:</b> [<a href="http://docs.oracle.com/javase/7/docs/api/">Java 7 API</a>]
</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h1 xmlns="http://www.w3.org/TR/xhtml1/transitional">Debugging</h1></div></div><hr></div><span class="emphasis"><em>Summary</em></span>: Debugging summary.

<div class="section" lang="en"><div class="titlepage"></div><p>
Unfortunately, as much as we would like to, sometimes we write code that is less than perfect. When that happens, we can spend more time trying to figure out what&#8217;s wrong than we actually spent writing the code itself. In order to make sure our code is working, we have to make sure it has no bugs.

</p><div class="itemizedlist"><ul type="disc"><li>The best way to catch bugs is to not insert them in the first place, or to document your code sufficiently well that they become "obvious". </li><li>Use preconditions and postconditions whenever possible. You may even find it useful to explicitly test both pre and postconditions in your code.</li></ul></div><p>
</p><p>
If you still end up producing non-working code, despite following the above conventions, then it&#8217;s time to debug your code. This can be done by simply looking at it and figuring out what&#8217;s wrong by testing it in many different ways, or using the built-in Eclipse Debugger.
</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 xmlns="http://www.w3.org/TR/xhtml1/transitional">What are Debuggers?</h2></div></div></div><p>
Debuggers are tools for tracing code to find if there&#8217;s something wrong and what that something is. They let you single-step through your code, printing variables as you go. They also let you set breakpoints so that your steps can be large enough. Using a debugger will be more efficient and informative than simply putting a bunch of print statements in your code to trace what&#8217;s going on.
</p><p>
Why debugging with print statements is bad:
</p><div class="itemizedlist"><ul type="disc"><li>In large programs you might have hundreds of output lines to check and it&#8217;s easier to break that output down and focus on a small piece</li><li>The buffer window for the (whole) output might be too small, so you would have to catch the output in a file</li><li>You can&#8217;t change the code while it&#8217;s running</li><li>You can&#8217;t skip or repeat certain pieces of code</li><li>You can&#8217;t examine memory contents in real time</li><li>You have to recompile many, many times</li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 xmlns="http://www.w3.org/TR/xhtml1/transitional">Things To Do &amp; How</h2></div></div></div><p>
There are some general things every debugger lets you do. You can:

</p><div class="itemizedlist"><ul type="disc"><li><span class="emphasis"><em>Set breakpoints</em></span> (parts of code you want to
    examine): In Eclipse you do that by right-clicking the left sidebar
    of the bottom left window and selecting Toggle Breakpoint
  </li><li><span class="emphasis"><em>Watch variables</em></span>: In the upper right window you
    can see all the variables you&#8217;ve declared in a method and check
    what&#8217;s happening to them every time the method is called
  </li><li><span class="emphasis"><em>Single step through a method or function</em></span>: Goes through your code one line at a time and it&#8217;s especially useful for loops
  </li><li><span class="emphasis"><em>Remove breakpoints</em></span>: Right click on the left
    sidebar of the bottom left window and select either 
    <span class="guimenuitem">Disable Breakpoint</span>
    or <span class="guimenuitem">Toggle Breakpoint</span>.
  </li></ul></div><p> </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 xmlns="http://www.w3.org/TR/xhtml1/transitional">How to Use the Debugger</h2></div></div></div><p>
There are some general things every debugger lets you do. You can:
</p><p>
The debugger will be useful for some of these tasks and not for others. It is up to your discretion to decide where to use it. Let&#8217;s do an exercise together, so you get a feeling of what it does. The example we&#8217;re using is one from the lab that corresponds to this reading.
</p><p>
Let&#8217;s take a look at Task1. We want it to print every String at an odd index in the array. When we run it, though, it seems to to exactly the opposite. Clearly there&#8217;s something wrong with our code and we need to fix it.
</p><p>
We can check what&#8217;s happening to every variable each time the loop executes by entering the Debug mode.
</p><p>
To enter Debug mode, either click on the Debug button in the top right corner, or if that&#8217;s hidden from view click the box on its left and click Debug. You will be presented with this interface:
</p><p>
Here you can choose the class you want to debug and you run that class in Debug mode by going to <span class="guimenu">Run</span> &gt; <span class="guimenuitem">Debug</span>.
</p><p>
We want to check the line in our class that we think is messing up our program and set a <span class="emphasis"><em>Breakpoint</em></span> there. This means that the debugger will tell us exactly what&#8217;s happening at that particular line of the code and won&#8217;t continue to execute the rest of the code unless we tell it to move on. Because we&#8217;ve established the error has to be in the for loop (there&#8217;s really not much else to the code), we&#8217;ll set our breakpoint on the for loop line. Of course the main method has to be executed as well, since it &#8220;runs&#8221; the method defined in our class. If we had more methods in our class, the only part of main that would be executed would be the part that pertains to the particular method we&#8217;re evaluating.
</p><p>
We set a breakpoint by right clicking or double clicking on the right of the class window. In the example the area is separated by a thin line (highlighted yellow in the example below).
</p><p>
We select Toggle Breakpoint.
</p><p>
And now we&#8217;ve set our breakpoint at the for loop. There&#8217;s a little blue dot at it. You can also see that the area that will be getting evaluated by the debugger is denoted by a blue line spanning from the method&#8217;s beginning to the end.
</p><p>
Now we can finally run the code in debugging mode. 
</p><p>
A bunch of things happen at once here. The Debug window shows us that it&#8217;s running the code in this class, and that it starts at line 9 and ends at line 22. The main window with our class code shows the line we&#8217;re evaluating by highlighting it green. The window in the top right corner (Variables) shows us what&#8217; happening to our variables when we run the method with the input we set in main:

</p><pre class="programlisting">System.out.println("Task 1 output:");
String[] numbers = {"zero", "one", "two", "three", "four", "five", "six"};
oddPrint(numbers);
</pre><p>
</p><p>
The Variables window is the one that we actually want to watch. We want to see how x and i change with each loop. I Right now it only shows us that x = 0, because we haven&#8217;t executed a loop yet. We can do that by &#8220;Stepping into&#8221; the method. 
</p><p>
Stepping over the method moves the debugger down one line - the if statement. We can see the variable i appeared under the Variables tab. Stepping into the method we can track what&#8217;s happening to both variables. So let&#8217;s do that a few more times to see what&#8217; actually happening and why the method isn&#8217;t working. You can go to <span class="emphasis"><em>Step Over</em></span> by clicking the button show above or going to <span class="guimenu">Run</span> &gt; <span class="guimenuitem">Step Over</span>.
</p><p>
There&#8217;s other ways you could debug the code, like:

</p><div class="itemizedlist"><ul type="disc"><li><span class="emphasis"><em>Step Into</em></span>: Goes through every line of the code one by one, does not go through every loop</li><li><span class="emphasis"><em>Step Out</em></span>: If you&#8217;re stepping into every line, Step out skips over a function that you don&#8217;t want to evaluate</li><li><span class="emphasis"><em>Step Over</em></span>: If the method you&#8217;re looking into is a loop, it will execute according to your input in the use of that method in main</li></ul></div><p>
</p><p>
You can see that the variables get highlighted yellow as we go through each line of the loop. This means the variable just changed. We keep stepping over the method and we notice a pattern.
</p><p>
We notice that x is one more than i when we enter the for loop.
</p><p>
When we enter the if statement, x == i. Clearly the method should be implemented in a way where when i is odd, i gets printed. Or in other words, when x is odd, i gets printed.

There are a few ways of how to do that. We could:

Change the remainder value:
<code class="code">if (x++ % 2 != 0)</code>

or

<code class="code">if (x++ % 2 == 1)</code>

Get rid of the x variable completely:
<code class="code">if (i % 2 != 0)</code>

or

<code class="code">if (i % 2 == 1)</code>

Use prefix incrementation on x:
<code class="code">if (++x % 2 == 0) </code>
</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 xmlns="http://www.w3.org/TR/xhtml1/transitional">Important Terms</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li>Debugging</li><li>Debug mode</li><li>Step Into</li><li>Step Over</li><li>Breakpoint</li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 xmlns="http://www.w3.org/TR/xhtml1/transitional">Review Questions</h2></div></div></div><p>
1. Think of examples where using the debugger would be useful.
</p><p>
2. How could we prevent making mistakes before implementing the code?
</p></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="foot"><div class="NOPRINT"><hr></hr><div class="NOPRINT"><p class="links">
[<a href="#body">Skip to Body</a>]
</p><p class="links"><b>Sections:</b> [<a href="../assignments/">Assignments</a>] [<a href="../examples/">Examples</a>] [<a href="../handouts/">Handouts</a>] [<a href="../readings/">Readings</a>]
</p><p class="links"><b>Reference:</b> [<a href="http://docs.oracle.com/javase/7/docs/api/">Java 7 API</a>]
</p></div><div class="pagenotes"><p><a rel="license" href="http://creativecommons.org/licenses/by-nc/2.5/"><img alt="Creative Commons License" style="border-width: 0" src="http://creativecommons.org/images/public/somerights20.png"></img></a></p></div></div><div class="pagenotes"><p>
Copyright (c) 2013 Samuel A. Rebelsky and the Glimmer '13 team.
</p><p>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/2.5/">Creative Commons
Attribution-NonCommercial 2.5  License</a>.  To view a copy of this
license, visit <a href="http://creativecommons.org/licenses/by-nc/2.5/"><code>http://creativecommons.org/licenses/by-nc/2.5/</code></a> 
or send a letter to Creative Commons, 543 Howard Street, 5th Floor, 
San Francisco, California, 94105, USA.
</p></div></div></body></html>
